(this["webpackJsonpyoutube-playlist-manager"]=this["webpackJsonpyoutube-playlist-manager"]||[]).push([[0],{149:function(e,t,n){},150:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var s,r,a=n(1),i=n(0),c=n.n(i),u=n(22),l=n.n(u),o=n(9),p=n(8),d=n(62),h=n(12),f=n.n(h),b=n(11),y=n(63),m=n(38),j=(n(149),function(e){var t=e.columns,n=e.data,s=e.hasMore,r=e.next,i=Object(m.useTable)({columns:t,data:n},m.useGridLayout),c=i.getTableProps,u=i.headerGroups,l=i.rows,o=i.prepareRow;return Object(a.jsx)(y.a,{dataLength:l.length,hasMore:s,next:r,loader:Object(a.jsx)("div",{id:"loader",children:"Loading..."}),children:Object(a.jsxs)("div",Object(b.a)(Object(b.a)({},c()),{},{className:"table",children:[u.map((function(e){return e.headers.map((function(e){return Object(a.jsx)("div",Object(b.a)(Object(b.a)({},e.getHeaderProps()),{},{className:"header",children:e.render("Header")}),e.id)}))})),l.map((function(e){return o(e)||e.cells.map((function(e){return Object(a.jsx)("div",Object(b.a)(Object(b.a)({},e.getCellProps()),{},{className:"cell",children:e.render("Cell")}))}))}))]}))})}),v=(n(150),function(e){var t=e.channelsList,n=e.hasMore,s=e.next,r=Object(i.useMemo)((function(){return[{Header:"Channel title",accessor:"snippet.title"},{Header:"Created on",accessor:"snippet.publishedAt"},{Header:"Description",accessor:"snippet.description"},{Header:"Videos",accessor:"statistics.videoCount"}]}),[]),c=Object(i.useMemo)((function(){return f()(t).map((function(e){return e.snippet.publishedAt=e.snippet.publishedAt.substring(0,10),e}))}),[t]);return Object(a.jsx)("div",{id:"channels",children:Object(a.jsx)(j,{columns:r,data:c,hasMore:n,next:s})})}),O=n(2),g=n.n(O),x=n(4),w=n(6),k=n(39),I=["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],T="https://www.googleapis.com/auth/youtube.readonly";function L(){return r=s.currentUser.get(),r.hasGrantedScopes(T)}function P(e,t){return C.apply(this,arguments)}function C(){return(C=Object(x.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gapi.client.youtube.channels.list({part:["snippet,contentDetails,statistics"],maxResults:50,id:t,pageToken:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H={channelId:function(){var e=Object(x.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mine"!==t){e.next=2;break}return e.abrupt("return",gapi.client.youtube.playlists.list({part:["snippet,contentDetails"],maxResults:50,mine:!0,pageToken:n}));case 2:return e.abrupt("return",gapi.client.youtube.playlists.list({part:["snippet,contentDetails"],maxResults:50,channelId:t,pageToken:n}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:function(){var e=Object(x.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gapi.client.youtube.playlists.list({part:["snippet,contentDetails"],maxResults:50,id:t,pageToken:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};function M(e,t){return S.apply(this,arguments)}function S(){return(S=Object(x.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gapi.client.youtube.playlistItems.list({part:["snippet"],maxResults:50,playlistId:t,pageToken:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return E.apply(this,arguments)}function E(){return(E=Object(x.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gapi.client.youtube.videos.list({part:["snippet,contentDetails,statistics"],maxResults:50,id:t,pageToken:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D={playlistsList:[],playlistsToken:"",playlistsError:{}},V=Object(w.b)({name:"playlists",initialState:D,reducers:{listPlaylistsSuccess:function(e,t){e.playlistsError=D.playlistsError,e.playlistsList=t.payload.items,e.playlistsToken=t.payload.nextPageToken},listPlaylistsFailed:function(e,t){e.playlistsError=t.payload}}}),R=V.actions,U=R.listPlaylistsSuccess,F=R.listPlaylistsFailed,z=function(e,t){return function(){var n=Object(x.a)(g.a.mark((function n(s,r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:H.id(e,t).then((function(e){var t=r().playlistsView.playlistsList;return e.result.items=e.result.items.concat(t),s(U(e.result)),!0})).catch((function(e){s(F(e))}));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},G=function(e,t){return function(){var n=Object(x.a)(g.a.mark((function n(s,r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:H.channelId(e,t).then((function(e){if(e.result.prevPageToken){var t=r().playlistsView.playlistsList;e.result.items=t.concat(e.result.items)}return s(U(e.result)),!0})).catch((function(e){s(F(e))}));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},N=function(e,t){return function(){var n=Object(x.a)(g.a.mark((function n(s,r){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:H.id(e,t).then((function(e){if(e.result.prevPageToken){var t=r().playlistsView.playlistsList;e.result.items=t.concat(e.result.items)}return s(U(e.result)),!0})).catch((function(e){s(F(e))}));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},B=V.reducer,J={channelsList:[],channelsToken:"",channelsError:{}},K=Object(w.b)({name:"channels",initialState:J,reducers:{listChannelsSuccess:function(e,t){e.channelsError=J.channelsError,e.channelsList=t.payload.items,e.channelsToken=t.payload.nextPageToken},listChannelsFailed:function(e,t){e.channelsError=t.payload}}}),W=K.actions,q=W.listChannelsSuccess,Z=W.listChannelsFailed,Q=K.reducer,X=n(43),Y=n(64),_=n(42),$=n(40),ee=function e(t){try{return new URL(t)}catch(n){return!t||t.startsWith("http://")||t.startsWith("https://")?null:e("https://".concat(t))}},te=function(e){var t=ee(e);return!!t&&t.pathname.startsWith("/channel/")},ne=function(e){var t=ee(e);return!!t&&t.searchParams.has("list")},se=function(e){var t=ee(e);return t?t.pathname.split("/").slice(-1)[0]:null},re=function(e){var t=ee(e);return t?t.searchParams.get("list"):null},ae=(n(154),function(e){var t=e.url,n=e.setUrl,s=Object(i.useState)(t),r=Object(X.a)(s,2),c=r[0],u=r[1],l=Object(i.useState)(!0),o=Object(X.a)(l,2),p=o[0],d=o[1],h=function(){n(c),d(!0),setTimeout((function(){d(!1)}),3e3)};return Object(i.useEffect)((function(){te(c)||ne(c)?d(!1):d(!0)}),[t,c]),Object(a.jsxs)("div",{id:"header",children:[Object(a.jsx)("input",{id:"url",type:"text",value:c,onChange:function(e){u(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&h()},placeholder:"Channel or Playlist URL"}),Object(a.jsx)("button",{id:"search",type:"button",disabled:p,onClick:h,children:Object(a.jsx)($.a,{icon:t===c?_.a:_.b})}),Object(a.jsx)("a",{id:"github",href:"https://github.com/utkarshgupta137/youtube-playlist-manager",rel:"noreferrer",target:"_blank",children:Object(a.jsx)($.a,{icon:Y.a})})]})}),ie=Object(w.b)({name:"header",initialState:{url:"https://www.youtube.com/channel/UCHnyfMqiRRG1u-2MsSQLbXA"},reducers:{updateUrl:function(e,t){e.url=t.payload.url}}}),ce=ie.actions.updateUrl,ue=ie.reducer,le=(n(155),function(e){var t=e.playlistItemsList,n=e.hasMore,s=e.next,r=Object(i.useMemo)((function(){return[{Header:"Position",accessor:"snippet.position"},{Header:"Added by",accessor:"snippet.channelTitle"},{Header:"Added on",accessor:"snippet.publishedAt"},{Header:"Video title",accessor:"video.snippet.title"},{Header:"Channel title",accessor:"video.snippet.channelTitle"},{Header:"Published on",accessor:"video.snippet.publishedAt"},{Header:"Duration",accessor:"video.contentDetails.duration"}]}),[]),c=Object(i.useMemo)((function(){return f()(t).map((function(e){return e.snippet.position+=1,e.snippet.publishedAt=e.snippet.publishedAt.substring(0,10),e.video&&(e.video.snippet.publishedAt=e.video.snippet.publishedAt.substring(0,10),e.video.contentDetails.duration=e.video.contentDetails.duration.replace("P","").replace("T","").toLowerCase()),e}))}),[t]);return Object(a.jsx)("div",{id:"playlistItems",children:Object(a.jsx)(j,{columns:r,data:c,hasMore:n,next:s})})}),oe={playlistItemsList:[],playlistItemsToken:"",playlistItemsError:{}},pe=Object(w.b)({name:"playlistItems",initialState:oe,reducers:{listPlaylistItemsSuccess:function(e,t){e.playlistItemsError=oe.playlistItemsError,e.playlistItemsList=t.payload.items,e.playlistItemsToken=t.payload.nextPageToken},listPlaylistItemsFailed:function(e,t){e.playlistItemsError=t.payload}}}),de=pe.actions,he=de.listPlaylistItemsSuccess,fe=de.listPlaylistItemsFailed,be=function(e,t){return function(){var n=Object(x.a)(g.a.mark((function n(s){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:M(e,t).then((function(e){var t;return s((t=e.result,function(){var e=Object(x.a)(g.a.mark((function e(n,s){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(t.items.map((function(e){return e.snippet.resourceId.videoId}))).then((function(e){if(t.items.forEach((function(t,n){t.video=e.result.items[n]})),t.prevPageToken){var r=s().playlistItemsView.playlistItemsList;t.items=r.concat(t.items)}return n(he(t)),!0})).catch((function(e){n(fe(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),!0})).catch((function(e){s(fe(e))}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ye=pe.reducer,me=(n(156),function(e){var t=e.playlistsList,n=e.hasMore,s=e.next,r=Object(i.useMemo)((function(){return[{Header:"Created by",accessor:"snippet.channelTitle"},{Header:"Published on",accessor:"snippet.publishedAt"},{Header:"Playlist title",accessor:"snippet.title"},{Header:"Description",accessor:"snippet.description"},{Header:"Videos",accessor:"contentDetails.itemCount"}]}),[]),c=Object(i.useMemo)((function(){return f()(t).map((function(e){return e.snippet.publishedAt=e.snippet.publishedAt.substring(0,10),e}))}),[t]);return Object(a.jsx)("div",{id:"playlists",children:Object(a.jsx)(j,{columns:r,data:c,hasMore:n,next:s})})}),je=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.headerView})).url,n=Object(o.c)((function(e){return e.channelsView})).channelsList,s=Object(o.c)((function(e){return e.playlistsView})),r=s.playlistsList,c=s.playlistsToken,u=Object(o.c)((function(e){return e.playlistItemsView})),l=u.playlistItemsList,p=u.playlistItemsToken,d=Object(i.useCallback)((function(t){var n,s;te(t)?(e(ce({url:t})),e((n=se(t),function(){var e=Object(x.a)(g.a.mark((function e(t,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(n,s).then((function(e){var n=e.result.items.map((function(e){return Object.values(e.contentDetails.relatedPlaylists).filter(Boolean).reverse()}));if(t(z(n)),e.result.prevPageToken){var s=r().channelsView.channelsList;e.result.items=s.concat(e.result.items)}return t(q(e.result)),!0})).catch((function(e){t(Z(e))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),e(G(se(t)))):ne(t)&&(e(ce({url:t})),e(N(re(t))),e(be(re(t))))}),[e]),h=Object(i.useCallback)((function(){e(G(se(t),c))}),[t,c,e]),f=Object(i.useCallback)((function(){e(be(re(t),p))}),[t,p,e]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ae,{url:t,setUrl:d}),n.length>0&&te(t)&&Object(a.jsx)(v,{channelsList:n,hasMore:!1,next:function(){}}),r.length>0&&Object(a.jsx)(me,{playlistsList:r,hasMore:!!c,next:h}),l.length>0&&ne(t)&&Object(a.jsx)(le,{playlistItemsList:l,hasMore:!!p,next:f})]})},ve=n(5),Oe=n(65),ge=n.n(Oe),xe=Object(ve.c)({channelsView:Q,headerView:ue,playlistItemsView:ye,playlistsView:B}),we={key:"root",version:1,storage:ge.a},ke=Object(p.g)(we,xe),Ie=Object(w.a)({reducer:ke,middleware:Object(w.c)({serializableCheck:{ignoredActions:[p.a,p.f,p.b,p.c,p.d,p.e]}})}),Te=(n(159),Object(p.h)(Ie));(gapi.load("client:auth2",(function(){return gapi.client.init({apiKey:k.a,clientId:k.b,discoveryDocs:I,scope:T}).then((function(){return(s=gapi.auth2.getAuthInstance()).isSignedIn.listen(L),L()}))})),new Promise((function e(t){return gapi.client&&gapi.client.youtube?t():setTimeout((function(){return e(t)}),100)}))).then((function(){return l.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(o.a,{store:Ie,children:Object(a.jsx)(d.a,{persistor:Te,children:Object(a.jsx)(je,{})})})}),document.getElementById("root")),!0})).catch((function(){return!1}))},39:function(e){e.exports=JSON.parse('{"a":"AIzaSyB4KEnndgC7iH8oDYSlZhZLzjyys2zHvjk","b":"254479881953-0scmhf7q4rmcnp61pa1pd83es2g1e3ui.apps.googleusercontent.com"}')}},[[160,1,2]]]);
//# sourceMappingURL=main.f4bf132c.chunk.js.map