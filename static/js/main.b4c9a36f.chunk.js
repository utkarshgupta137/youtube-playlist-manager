(this["webpackJsonpyoutube-playlist-manager"]=this["webpackJsonpyoutube-playlist-manager"]||[]).push([[0],{120:function(e,t,s){},121:function(e,t,s){},170:function(e,t,s){},171:function(e,t,s){},172:function(e,t,s){},173:function(e,t,s){},178:function(e,t,s){},179:function(e,t,s){"use strict";s.r(t);var n,a,i=s(1),r=s(0),c=s.n(r),l=s(5),o=s.n(l),u=s(19),p=s(16),d=s(79),h=s(10),b=s(4),j=s(13),y=s(7),f=s.n(y),m=s(17),O=s(20),g=s(54),x=["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"],v="https://www.googleapis.com/auth/youtube.readonly",k=!1,w=function(){k?n.signOut():n.signIn()},L=function(e,t){return"mine"===e?Object(O.a)(gapi.client.youtube.channels.list({part:["snippet,statistics"],maxResults:50,mine:!0,pageToken:t})):Object(O.a)(gapi.client.youtube.channels.list({part:["snippet,statistics"],maxResults:50,id:e,pageToken:t}))},I=function(e,t){return"mine"===e?Object(O.a)(gapi.client.youtube.playlists.list({part:["snippet,contentDetails"],maxResults:50,mine:!0,pageToken:t})):Object(O.a)(gapi.client.youtube.playlists.list({part:["snippet,contentDetails"],maxResults:50,channelId:e,pageToken:t}))},P=function(e,t){return Object(O.a)(gapi.client.youtube.playlists.list({part:["snippet,contentDetails"],maxResults:50,id:e,pageToken:t}))},T=function(e,t){return Object(O.a)(gapi.client.youtube.playlistItems.list({part:["snippet"],maxResults:50,playlistId:e,pageToken:t}))},C=function(e,t){return Object(O.a)(gapi.client.youtube.videos.list({part:["snippet,contentDetails,statistics"],maxResults:50,id:e,pageToken:t}))},E=s(81),A=s(28),H=s(27),S=s(55),M=s.n(S),D=function(e){if(e)try{return e.startsWith("http://")||e.startsWith("https://")?new URL(e):new URL("https://".concat(e))}catch(t){}return null},F=new RegExp(/^\/channel\/([\w-]+)$/),R=M()((function(e){var t=D(e);return t&&F.test(t.pathname)?F.exec(t.pathname)[1]:null})),U=M()((function(e){var t=D(e);return t&&t.searchParams.has("list")?t.searchParams.get("list"):null})),V=s(84),z=(s(120),function(e){var t=e.user,s=e.toggleUser,n=Object(r.useMemo)((function(){var e;return e=t.isAuthorized?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("img",{id:"userImage",src:t.image,alt:""}),Object(i.jsx)("span",{id:"userName",children:t.name}),Object(i.jsx)("span",{id:"userEmail",children:t.email})]}):Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("span",{id:"signInPrompt",children:["Sign in to access your",Object(i.jsx)("br",{}),"channel & private playlists."]})}),Object(i.jsxs)("div",{id:"userPopout",children:[e,Object(i.jsx)("button",{id:"toggleUser",type:"button",onClick:s,children:Object(i.jsx)(H.a,{icon:t.isAuthorized?A.c:A.b})})]})}),[t,s]);return Object(i.jsx)(V.a,{placement:"left",trigger:"click",overlay:n,children:Object(i.jsx)("button",{id:"user",type:"button",children:Object(i.jsx)(H.a,{icon:A.d})})})}),N=(s(121),function(e){var t=e.user,s=e.toggleUser,n=Object(b.f)(),a=Object(r.useState)("youtu.be/channel/mine"),c=Object(h.a)(a,2),l=c[0],o=c[1],u=Object(r.useState)(!1),p=Object(h.a)(u,2),d=p[0],j=p[1],y=function(){R(l)?n.push("/channel/".concat(R(l))):U(l)&&n.push("/playlist/".concat(U(l)))};return Object(i.jsxs)("div",{id:"headerView",children:[Object(i.jsx)("a",{id:"github",href:"https://github.com/utkarshgupta137/youtube-playlist-manager",rel:"noreferrer",target:"_blank",children:Object(i.jsx)(H.a,{icon:E.a})}),Object(i.jsx)("input",{id:"url",type:"text",value:l,onChange:function(e){o(e.target.value),R(e.target.value)||U(e.target.value)?j(!1):j(!0)},onKeyDown:function(e){"Enter"===e.key&&y()},placeholder:"Channel or Playlist URL"}),Object(i.jsx)("button",{id:"search",type:"button",disabled:d,onClick:y,children:Object(i.jsx)(H.a,{icon:A.a})}),Object(i.jsx)(z,{user:t,toggleUser:s})]})}),_=s(25),B=s.n(_),G=s(23),J=s(82),K=s(59),Y=(s(170),function(e){var t=e.columns,s=e.data,n=e.hasMore,a=e.next,r=Object(K.useTable)({columns:t,data:s},K.useGridLayout),c=r.getTableProps,l=r.headerGroups,o=r.rows,u=r.prepareRow;return Object(i.jsx)(J.a,{dataLength:o.length,hasMore:n,next:a,loader:Object(i.jsx)("div",{id:"loader",children:"Loading..."}),children:Object(i.jsxs)("div",Object(G.a)(Object(G.a)({},c()),{},{className:"table",children:[l.map((function(e){return e.headers.map((function(e){return Object(i.jsx)("div",Object(G.a)(Object(G.a)({},e.getHeaderProps()),{},{className:"header",children:e.render("Header")}),e.id)}))})),o.map((function(e){return u(e)||e.cells.map((function(e){return Object(i.jsx)("div",Object(G.a)(Object(G.a)({},e.getCellProps()),{},{className:"cell",children:e.render("Cell")}))}))}))]}))})}),W=(s(171),function(e){var t=e.channelsList,s=e.hasMore,n=e.next,a=Object(r.useMemo)((function(){return[{Header:"Channel title",accessor:"snippet.title",Cell:function(e){return Object(i.jsx)("a",{href:"https://youtube.com/channel/".concat(e.row.original.id),rel:"noreferrer",target:"_blank",children:e.value})}},{Header:"Created on",accessor:"snippet.publishedAt"},{Header:"Description",accessor:"snippet.description"},{Header:"Videos",accessor:"statistics.videoCount"}]}),[]),c=Object(r.useMemo)((function(){return B()(t).map((function(e){return e.snippet.publishedAt=e.snippet.publishedAt.substring(0,10),e}))}),[t]);return Object(i.jsx)("div",{id:"channelsView",children:Object(i.jsx)(Y,{columns:a,data:c,hasMore:s,next:n})})}),Z=(s(172),function(e){var t=e.playlistsList,s=e.hasMore,n=e.next,a=e.channelView,c=Object(r.useMemo)((function(){return[{Header:"Created by",accessor:"snippet.channelTitle",Cell:function(e){return a?e.value:Object(i.jsx)(p.b,{to:"/channel/".concat(e.row.original.snippet.channelId),children:e.value})}},{Header:"Published on",accessor:"snippet.publishedAt"},{Header:"Playlist title",accessor:"snippet.title",Cell:function(e){return a?Object(i.jsx)(p.b,{to:"/playlist/".concat(e.row.original.id),children:e.value}):Object(i.jsx)("a",{href:"https://www.youtube.com/playlist?list=".concat(e.row.original.id),rel:"noreferrer",target:"_blank",children:e.value})}},{Header:"Description",accessor:"snippet.description"},{Header:"Videos",accessor:"contentDetails.itemCount"}]}),[a]),l=Object(r.useMemo)((function(){return B()(t).map((function(e){return e.snippet.publishedAt=e.snippet.publishedAt.substring(0,10),e}))}),[t]);return Object(i.jsx)("div",{id:"playlistsView",children:Object(i.jsx)(Y,{columns:c,data:l,hasMore:s,next:n})})});Z.defaultProps={channelView:!1};var q=Z,$=s(26),Q={channelsError:{},channelsList:[],channelsToken:"",playlistsError:{},playlistsList:[],playlistsToken:""},X=Object($.b)({name:"channels",initialState:Q,reducers:{listChannelsSuccess:function(e,t){e.channelsError=Q.channelsError,t.payload.prevPageToken?e.channelsList=e.channelsList.concat(t.payload.items):e.channelsList=t.payload.items,e.channelsToken=t.payload.nextPageToken},listChannelsFailed:function(e,t){e.channelsList=Q.channelsList,e.channelsToken=Q.channelsToken,e.channelsError=t.payload},listPlaylistsSuccess:function(e,t){e.playlistsError=Q.playlistsError,t.payload.prevPageToken?e.playlistsList=e.playlistsList.concat(t.payload.items):e.playlistsList=t.payload.items,e.playlistsToken=t.payload.nextPageToken},listPlaylistsFailed:function(e,t){e.playlistsList=Q.playlistsList,e.playlistsToken=Q.playlistsToken,e.playlistsError=t.payload}}}),ee=X.actions,te=ee.listChannelsSuccess,se=ee.listChannelsFailed,ne=ee.listPlaylistsSuccess,ae=ee.listPlaylistsFailed,ie=function(e,t){return function(){var s=Object(m.a)(f.a.mark((function s(n){var a,i,r,c;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,I(e,t);case 2:a=s.sent,i=Object(h.a)(a,2),r=i[0],c=i[1],!r&&c.result.items?n(ne(c.result)):n(ae(r||c));case 7:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},re=X.reducer,ce=function(){var e=Object(u.b)(),t=Object(b.g)().channelId;Object(r.useEffect)((function(){e(function(e,t){return function(){var s=Object(m.a)(f.a.mark((function s(n){var a,i,r,c;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,L(e,t);case 2:a=s.sent,i=Object(h.a)(a,2),r=i[0],c=i[1],!r&&c.result.items&&c.result.items.length>0?n(te(c.result)):n(se(r||c));case 7:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(t)),e(ie(t))}),[t,e]);var s=Object(u.c)((function(e){return e.channelsPage})),n=s.channelsError,a=s.channelsList,c=s.playlistsList,l=s.playlistsToken;Object(r.useEffect)((function(){200===n.status?j.c.error("Channel not found. Check the URL."):401===n.status?j.c.error("You must sign in to access this channel."):n.result&&j.c.error(n.result.error.message)}),[n]);var o=Object(r.useCallback)((function(){e(ie(t,l))}),[t,l,e]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(W,{channelsList:a,hasMore:!1,next:function(){}}),Object(i.jsx)(q,{playlistsList:c,hasMore:!!l,next:o,channelView:!0})]})},le=(s(173),function(e){var t=e.playlistItemsList,s=e.hasMore,n=e.next,a=Object(r.useMemo)((function(){return[{Header:"Position",accessor:"snippet.position"},{Header:"Added by",accessor:"snippet.channelTitle"},{Header:"Added on",accessor:"snippet.publishedAt"},{Header:"Video title",accessor:"video.snippet.title",Cell:function(e){return Object(i.jsx)("a",{href:"https://www.youtube.com/watch?v=".concat(e.row.original.video.id,"&list=").concat(e.row.original.snippet.playlistId,"&index=").concat(e.row.original.snippet.position),rel:"noreferrer",target:"_blank",children:e.value})}},{Header:"Channel title",accessor:"video.snippet.channelTitle"},{Header:"Published on",accessor:"video.snippet.publishedAt"},{Header:"Duration",accessor:"video.contentDetails.duration"}]}),[]),c=Object(r.useMemo)((function(){return B()(t).map((function(e){return e.snippet.position+=1,e.snippet.publishedAt=e.snippet.publishedAt.substring(0,10),e.video&&(e.video.snippet.publishedAt=e.video.snippet.publishedAt.substring(0,10),e.video.contentDetails.duration=e.video.contentDetails.duration.replace("P","").replace("T","").toLowerCase()),e}))}),[t]);return Object(i.jsx)("div",{id:"playlistItemsView",children:Object(i.jsx)(Y,{columns:a,data:c,hasMore:s,next:n})})}),oe={playlistItemsError:{},playlistItemsList:[],playlistItemsToken:"",playlistsError:{},playlistsList:[],playlistsToken:""},ue=Object($.b)({name:"playlistItems",initialState:oe,reducers:{listPlaylistItemsSuccess:function(e,t){e.playlistItemsError=oe.playlistItemsError,t.payload.prevPageToken?e.playlistItemsList=e.playlistItemsList.concat(t.payload.items):e.playlistItemsList=t.payload.items,e.playlistItemsToken=t.payload.nextPageToken},listPlaylistItemsFailed:function(e,t){e.playlistItemsList=oe.playlistItemsList,e.playlistItemsToken=oe.playlistItemsToken,e.playlistItemsError=t.payload},listPlaylistsSuccess:function(e,t){e.playlistsError=oe.playlistsError,t.payload.prevPageToken?e.playlistsList=e.playlistsList.concat(t.payload.items):e.playlistsList=t.payload.items,e.playlistsToken=t.payload.nextPageToken},listPlaylistsFailed:function(e,t){e.playlistsList=oe.playlistsList,e.playlistsToken=oe.playlistsToken,e.playlistsError=t.payload}}}),pe=ue.actions,de=pe.listPlaylistItemsSuccess,he=pe.listPlaylistItemsFailed,be=pe.listPlaylistsSuccess,je=pe.listPlaylistsFailed,ye=function(e){return function(){var t=Object(m.a)(f.a.mark((function t(s){var n,a,i,r,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.items.map((function(e){return e.snippet.resourceId.videoId})),t.next=3,C(n);case 3:a=t.sent,i=Object(h.a)(a,2),r=i[0],c=i[1],!r&&c.result.items?(e.items.forEach((function(e,t){e.video=c.result.items[t]})),s(de(e))):s(he(r||c));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fe=function(e,t){return function(){var s=Object(m.a)(f.a.mark((function s(n){var a,i,r,c;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,T(e,t);case 2:a=s.sent,i=Object(h.a)(a,2),r=i[0],c=i[1],!r&&c.result.items?c.result.items.length>0?n(ye(c.result)):n(de(c.result)):n(he(r||c));case 7:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},me=ue.reducer,Oe=function(){var e=Object(u.b)(),t=Object(b.g)().playlistId;Object(r.useEffect)((function(){e(function(e,t){return function(){var s=Object(m.a)(f.a.mark((function s(n){var a,i,r,c;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,P(e,t);case 2:a=s.sent,i=Object(h.a)(a,2),r=i[0],c=i[1],!r&&c.result.items&&c.result.items.length>0?n(be(c.result)):n(je(r||c));case 7:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(t)),e(fe(t))}),[t,e]);var s=Object(u.c)((function(e){return e.playlistsPage})),n=s.playlistsError,a=s.playlistsList,c=s.playlistItemsList,l=s.playlistItemsToken;Object(r.useEffect)((function(){200===n.status?j.c.error("Playlist not found. Check the URL."):401===n.status?j.c.error("You must sign in to access this playlist."):n.result&&j.c.error(n.result.error.message)}),[n]);var o=Object(r.useCallback)((function(){e(fe(t,l))}),[t,l,e]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(q,{playlistsList:a,hasMore:!1,next:function(){}}),Object(i.jsx)(le,{playlistItemsList:c,hasMore:!!l,next:o})]})},ge=function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),s=t[0],c=t[1],l=Object(r.useState)({isAuthorized:!1}),o=Object(h.a)(l,2),u=o[0],p=o[1];return Object(r.useEffect)((function(){!function(e,t){gapi.load("client:auth2",Object(m.a)(f.a.mark((function s(){var i;return f.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,gapi.client.init({apiKey:g.a,clientId:g.b,discoveryDocs:x,scope:v});case 2:e(!0),n=gapi.auth2.getAuthInstance(),i=function(){a=n.currentUser.get();var e={isAuthorized:k=a.hasGrantedScopes(v)};if(k){var s=a.getBasicProfile();e.name=s.getName(),e.email=s.getEmail(),e.image=s.getImageUrl()}t(e)},n.isSignedIn.listen(i),i();case 7:case"end":return s.stop()}}),s)}))))}(c,p)}),[]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(N,{user:u,toggleUser:w}),Object(i.jsx)(j.b,{position:"top-right",transition:j.a,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),s&&Object(i.jsxs)(b.c,{children:[Object(i.jsx)(b.a,{path:"/channel/:channelId",children:Object(i.jsx)(ce,{})}),Object(i.jsx)(b.a,{path:"/playlist/:playlistId",children:Object(i.jsx)(Oe,{})})]})]})},xe=s(8),ve=s(18),ke=s(83),we=s.n(ke),Le=Object(xe.c)({channelsPage:re,playlistsPage:me}),Ie=Object(ve.g)({key:"root",storage:we.a,version:.2},Le),Pe=Object($.a)({reducer:Ie,middleware:function(e){return e({serializableCheck:{ignoredActions:[ve.a,ve.b,ve.c,ve.d,ve.e,ve.f]}})}}),Te=Object(ve.h)(Pe),Ce=Pe;s(176),s(177),s(178);o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(u.a,{store:Ce,children:Object(i.jsx)(d.a,{persistor:Te,children:Object(i.jsx)(p.a,{basename:"/youtube-playlist-manager/#",children:Object(i.jsx)(ge,{})})})})}),document.getElementById("root"))},54:function(e){e.exports=JSON.parse('{"a":"AIzaSyB4KEnndgC7iH8oDYSlZhZLzjyys2zHvjk","b":"254479881953-0scmhf7q4rmcnp61pa1pd83es2g1e3ui.apps.googleusercontent.com"}')}},[[179,1,2]]]);
//# sourceMappingURL=main.b4c9a36f.chunk.js.map